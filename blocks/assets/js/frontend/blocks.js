(()=>{"use strict";var e={295:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Collapse=void 0;var o,i=(o=n(196))&&o.__esModule?o:{default:o};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,n,o,p,h=(o=d,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(o);if(p){var n=c(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}(this,e)});function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),u(l(t=h.call(this,e)),"timeout",void 0),u(l(t),"container",void 0),u(l(t),"content",void 0),u(l(t),"onResize",(function(){if(clearTimeout(t.timeout),t.container&&t.content){var e=t.props,n=e.isOpened,r=e.checkTimeout,o=Math.floor(t.container.clientHeight),i=Math.floor(t.content.clientHeight),a=n&&Math.abs(i-o)<=1,s=!n&&Math.abs(o)<=1;a||s?t.onRest({isFullyOpened:a,isFullyClosed:s,isOpened:n,containerHeight:o,contentHeight:i}):(t.onWork({isFullyOpened:a,isFullyClosed:s,isOpened:n,containerHeight:o,contentHeight:i}),t.timeout=setTimeout((function(){return t.onResize()}),r))}})),u(l(t),"onRest",(function(e){var n=e.isFullyOpened,r=e.isFullyClosed,o=e.isOpened,i=e.containerHeight,a=e.contentHeight;if(t.container&&t.content){var s=o&&t.container.style.height==="".concat(a,"px"),l=!o&&"0px"===t.container.style.height;if(s||l){t.container.style.overflow=o?"initial":"hidden",t.container.style.height=o?"auto":"0px";var c=t.props.onRest;c&&c({isFullyOpened:n,isFullyClosed:r,isOpened:o,containerHeight:i,contentHeight:a})}}})),u(l(t),"onWork",(function(e){var n=e.isFullyOpened,r=e.isFullyClosed,o=e.isOpened,i=e.containerHeight,a=e.contentHeight;if(t.container&&t.content){var s=o&&t.container.style.height==="".concat(a,"px"),l=!o&&"0px"===t.container.style.height;if(!s&&!l){t.container.style.overflow="hidden",t.container.style.height=o?"".concat(a,"px"):"0px";var c=t.props.onWork;c&&c({isFullyOpened:n,isFullyClosed:r,isOpened:o,containerHeight:i,contentHeight:a})}}})),u(l(t),"onRefContainer",(function(e){t.container=e})),u(l(t),"onRefContent",(function(e){t.content=e})),e.initialStyle?t.initialStyle=e.initialStyle:t.initialStyle=e.isOpened?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"},t}return t=d,(n=[{key:"componentDidMount",value:function(){this.onResize()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.theme,r=t.isOpened;return t.children!==e.children||r!==e.isOpened||Object.keys(n).some((function(t){return n[t]!==e.theme[t]}))}},{key:"getSnapshotBeforeUpdate",value:function(){if(!this.container||!this.content)return null;if("auto"===this.container.style.height){var e=this.content.clientHeight;this.container.style.height="".concat(e,"px")}return null}},{key:"componentDidUpdate",value:function(){this.onResize()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=e.theme,n=e.children,r=e.isOpened;return i.default.createElement("div",{ref:this.onRefContainer,className:t.collapse,style:this.initialStyle,"aria-hidden":!r},i.default.createElement("div",{ref:this.onRefContent,className:t.content},n))}}])&&a(t.prototype,n),d}(i.default.Component);t.Collapse=p,u(p,"defaultProps",{theme:{collapse:"ReactCollapse--collapse",content:"ReactCollapse--content"},initialStyle:void 0,onRest:void 0,onWork:void 0,checkTimeout:50})},619:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.UnmountClosed=void 0;var o,i=(o=n(196))&&o.__esModule?o:{default:o},a=n(295),s=["isOpened"],l=["isOpened"];function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(O,e);var t,n,o,u,v=(o=O,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(o);if(u){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,e)});function O(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,O),b(m(t=v.call(this,e)),"onWork",(function(e){var n=e.isOpened,r=h(e,s);t.setState({isResting:!1,isOpened:n});var o=t.props.onWork;o&&o(p({isOpened:n},r))})),b(m(t),"onRest",(function(e){var n=e.isOpened,r=h(e,l);t.setState({isResting:!0,isOpened:n,isInitialRender:!1});var o=t.props.onRest;o&&o(p({isOpened:n},r))})),b(m(t),"getInitialStyle",(function(){var e=t.state,n=e.isOpened;return e.isInitialRender&&n?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"}})),t.state={isResting:!0,isOpened:e.isOpened,isInitialRender:!0},t}return t=O,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props.isOpened;e.isOpened!==t&&this.setState({isResting:!1,isOpened:t,isInitialRender:!1})}},{key:"render",value:function(){var e=this.state,t=e.isResting,n=e.isOpened;return t&&!n?null:i.default.createElement(a.Collapse,c({},this.props,{initialStyle:this.getInitialStyle(),onWork:this.onWork,onRest:this.onRest}))}}])&&d(t.prototype,n),O}(i.default.PureComponent);t.UnmountClosed=v,b(v,"defaultProps",{onWork:void 0,onRest:void 0})},180:(e,t,n)=>{var r=n(295).Collapse,o=n(619).UnmountClosed;e.exports=o,o.Collapse=r,o.UnmountClosed=o},196:e=>{e.exports=window.React}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};(()=>{n.d(r,{J:()=>m});var e=n(196),t=n.n(e);const o=window.wc.wcBlocksRegistry,i=window.wp.htmlEntities,a=window.wc.wcSettings;var s=n(180);class l extends t().Component{hasParent=!1;static instances=[];constructor(e){super(e),this.state={isOpen:!1,isSelected:!1},this.hasParent=!!e.hasParent&&e.hasParent,l.instances.push(this)}render(){const{numericChannelId:t,id:n,value:r,name:o,label:i,icon:a,description:l,items:u,hasParent:p}=this.props;this.numericChannelId=t;const h=Array.isArray(u)&&u.length>0;return(0,e.createElement)("li",{className:"atp-block-payment-item"+(h?" atp-has-children":"")},(0,e.createElement)("label",{className:this.state.isSelected?"atp-active":"",htmlFor:n},(0,e.createElement)("input",{onClick:this.hasParent?this.handleToggleSelected:h?this.handleToggle:this.closeAllInstances,id:n,value:r,type:"radio",name:o}),(0,e.createElement)("img",{src:a,alt:o}),(0,e.createElement)("div",{className:"atp-block-payment-item-wrapper"},(0,e.createElement)("span",{className:"atp-block-payment-label"},i),(0,e.createElement)("span",{className:"atp-block-payment-description",dangerouslySetInnerHTML:{__html:l}}))),(0,e.createElement)(s.Collapse,{isOpened:this.state.isOpen},h?(0,e.createElement)(c,{items:u,hasParent:!0}):null))}handleToggle=()=>{this.handleToggleSelected(),this.setState({isOpen:!this.state.isOpen,isSelected:this.state.isSelected})};handleToggleSelected=()=>{this.unselectAllInstances(),this.setState({isOpen:this.state.isOpen,isSelected:!0}),m.setPaymentChannelId(this.numericChannelId)};closeAllInstances=()=>{l.instances.forEach((e=>{e.setState({isOpen:!1,isSelected:!1})})),this.handleToggleSelected()};unselectAllInstances(){l.instances.forEach((e=>{e.setState({isOpen:e.state.isOpen,isSelected:!1})}))}}class c extends t().Component{hasParent=!1;constructor(e){super(e),this.list=e.items,this.hasParent=!!e.hasParent&&e.hasParent}render(){if(this.list&&0!==this.list.length)return(0,e.createElement)("ul",{className:"atp-block-payment"},this.list.map((t=>(0,e.createElement)(l,{numericChannelId:t.numericChannelId,id:t.key,value:t.value,name:t.name,label:t.label,icon:t.icon,items:t.items,description:t.description,hasParent:this.hasParent}))))}}class u extends t().Component{constructor(e){super(e)}render(){const{label:t,iconSrc:n,iconAlt:r}=this.props;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("span",{className:"wc-block-components-payment-method-label"},t),(0,e.createElement)("img",{src:n,alt:r}))}}class p{static APPLE_PAY_CHANNEL_ID=1513;static processItem({key:e,value:t,name:n,label:r,icon:o,id:i,block_description:a,items:s}){let l={numericChannelId:i=parseInt(i),key:e,value:t,name:n,label:r,icon:o,description:a,items:[]};if(s&&s.length>0)for(const e of s)l.items.push(p.processItem(e));return l}static createChannelsFromServer(e){let t={items:[]};for(const n of e){let e=p.processItem(n);this.validateItem(e)&&t.items.push(e)}return t}static validateItem(e){return!(e.numericChannelId===this.APPLE_PAY_CHANNEL_ID&&!this.isApplePay())}static isApplePay(){return window.ApplePaySession}}class h{static create({title:e,description:t,icon_src:n,whitelabel:r,supports:o,place_order_button_label:i,channels:a,messages:s}){try{return{label:e,description:t,iconSrc:n,whitelabel:r,placeOrderButtonLabel:i,supports:o,channels:p.createChannelsFromServer(a),messages:s}}catch(e){throw e("Create PaymentMethodData failed")}}}class d{static messages={};static setMessages(e){d.messages=e}static getMessage(e,t=""){return void 0===d.messages[e]?t:d.messages[e]}}const f=(0,a.getPaymentMethodData)("bluemedia",{});class m extends t().Component{payment_data=["test"];constructor(){super({})}static init(t){m.paymentMethodDataFromServer=h.create(f),d.setMessages(m.paymentMethodDataFromServer.messages),(0,o.registerPaymentMethod)({name:"bluemedia",label:(0,e.createElement)(u,{label:this.paymentMethodDataFromServer.label,iconSrc:this.paymentMethodDataFromServer.iconSrc,iconAlt:this.paymentMethodDataFromServer.label}),content:(0,e.createElement)(m,null),edit:(0,e.createElement)(m,null),ariaLabel:this.paymentMethodDataFromServer.label,supports:{features:this.paymentMethodDataFromServer.supports},canMakePayment:()=>!0,placeOrderButtonLabel:this.paymentMethodDataFromServer.placeOrderButtonLabel,savedTokenComponent:(0,e.createElement)(m,null)})}static setPaymentChannelId(e){m.paymentChannelId=e}render(){return m.paymentMethodDataFromServer.whitelabel?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c,{items:m.paymentMethodDataFromServer.channels.items})):(0,e.createElement)(e.Fragment,null,(0,i.decodeEntities)(m.paymentMethodDataFromServer.description||""))}componentDidUpdate(e){}unsubscribe=null;componentDidMount(){const{eventRegistration:e,emitResponse:t}=this.props,{onPaymentProcessing:n}=e;this.unsubscribe=n((async()=>{const e=m.paymentChannelId;return e?{type:t.responseTypes.SUCCESS,meta:{paymentMethodData:{autopay_numeric_channel_Id:e.toString()}}}:{type:t.responseTypes.ERROR,message:d.getMessage("no_payment_channel_selected","No payment channel selected.")}}))}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}}m.init(f)})()})();